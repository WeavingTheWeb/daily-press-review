parameters:
    weaving_the_web_dashboard.dbal_connection.class:          WeavingTheWeb\Bundle\DashboardBundle\DBAL\Connection
    weaving_the_web_dashboard.entity.perspective:             WeavingTheWebDashboardBundle:Perspective
    weaving_the_web_dashboard.map_perspective_command.class:  WeavingTheWeb\Bundle\DashboardBundle\Command\MapPerspectiveCommand
    weaving_the_web_dashboard.map_status_command.class:       WeavingTheWeb\Bundle\DashboardBundle\Command\MapStatusCommand
    weaving_the_web_dashboard.perspective_validator.class:    WeavingTheWeb\Bundle\DashboardBundle\Validator\Constraints\PerspectiveValidator
    weaving_the_web_dashboard.repository.perspective.class:   WeavingTheWeb\Bundle\DashboardBundle\Repository\PerspectiveRepository
    weaving_the_web_dashboard.query_validator.class:          WeavingTheWeb\Bundle\DashboardBundle\Validator\Constraints\QueryValidator
    weaving_the_web_dashboard.router.class:                   WeavingTheWeb\Bundle\DashboardBundle\Routing\Router

services:
    weaving_the_web_dashboard.dbal_connection:
        class:  %weaving_the_web_dashboard.dbal_connection.class%
        arguments:
            - @validator
            - @logger
        calls:
            - [ setCharset, [ %database_charset% ] ]
            - [ setHost, [ %database_host% ] ]
            - [ setUsername, [ %database_user% ] ]
            - [ setPassword, [ %database_password% ] ]
            - [ setPort, [ %database_port% ] ]
            - [ setDatabase, [ %database_name% ] ]
            - [ setEntityManager, [ @doctrine.orm.entity_manager ] ]
            - [ setTranslator, [ @translator ] ]
    weaving_the_web_dashboard.query_validator:
        class: %weaving_the_web_dashboard.query_validator.class%
        calls:
            - [ setTranslator, [ @translator ] ]
        tags:
            - { name: validator.constraint_validator, alias: weaving_the_web.validator.query }
    weaving_the_web_dashboard.perspective_validator:
        class: %weaving_the_web_dashboard.perspective_validator.class%
        calls:
            - [ setTranslator, [ @translator ] ]
            - [ setValidator, [ @validator ] ]
        tags:
            - { name: validator.constraint_validator, alias: weaving_the_web.validator.perspective }
    weaving_the_web_dashboard.router:
        class: %weaving_the_web_dashboard.router.class%
        calls:
            - [ setRouter, [ @router ] ]
            - [ setEntityManager, [ @doctrine.orm.entity_manager ] ]
    twig.extension.text:
        class: Twig_Extensions_Extension_Text
        tags:
            - { name: twig.extension }
    weaving_the_web_dashboard.repository.perspective:
        class: %weaving_the_web_dashboard.repository.perspective.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments: [%weaving_the_web_dashboard.entity.perspective%]
