machine:
  timezone:
    Europe/Paris
  node:
    version: 4.2.2
  php:
    version: 5.5.11

dependencies:
  override:
    - npm install
  post:
    - wget https://saucelabs.com/downloads/sc-latest-linux.tar.gz
    - tar -xzf sc-latest-linux.tar.gz

dependencies:
  cache_directories:
    - src/WeavingTheWeb/Bundle/DashboardBundle/Resources/public/components
    - tests/bower_components
  pre:
    - /bin/bash -c 'cp app/config/parameters.yml{.dist,}'
    - /bin/bash -c 'test -d ~/.composer || mkdir ~/.composer'
    - source ./tests/.configure-composer-auth.sh

test:
  override:
    - cd sc-*-linux && ./bin/sc -u $SAUCE_USERNAME -k $SAUCE_ACCESS_KEY:
        background: true
    - npm test
