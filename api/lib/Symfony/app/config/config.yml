imports:
    - { resource: parameters.yml }
    - { resource: parameters.php }
    - { resource: security.yml }

framework:
    default_locale:       %locale%
    translator:           { fallback: en }
    secret:               %secret%
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: %kernel.debug%
    form:                 true
    csrf_protection:      true
    validation:           { enable_annotations: true }
    templating:           { engines: ['twig'] }
    trust_proxy_headers:  false
    session:              ~

fos_user:
    db_driver:      orm
    firewall_name:  wtw_connect
    user_class:     WTW\UserBundle\Entity\User

fos_twitter:
    file:             %kernel.root_dir%/../vendor/kertz/twitteroauth/twitteroauth/twitteroauth.php
    consumer_key:     %api_twitter_consumer_key%
    consumer_secret:  %api_twitter_consumer_secret%
    callback_url:     %api_twitter_callback_url%

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    filters:
        cssrewrite: ~
        less:
            node:       %assetic_node%
            node_paths: [ %assetic_node_module% ]
            apply_to:   "\.less$"

# Doctrine Configuration
doctrine:
    dbal:
        default_connection: default
        connections:
            admin:
                charset:  %database_charset_admin%
                driver:   %database_driver_admin%
                host:     %database_host_admin%
                dbname:   %database_name_admin%
                user:     %database_user_admin%
                password: %database_password_admin%
            test_mysql:
                charset:  %database_charset_test%
                driver:   %database_driver_test%
                host:     %database_host_test%
                dbname:   %database_name_test%
                user:     %database_user_test%
                password: %database_password_test%
    orm:
        default_entity_manager: default
        entity_managers:
            default:
                connection: default
                mappings:
                    WTWAPIDataMiningBundle: ~
                    WTWAPIFacebookBundle: ~
                    WTWCodeGenerationAnalysisBundle: ~
                    WTWDashboardBundle: ~
                    WTWLegacyProviderBundle: ~
                    WTWUserBundle: ~
            admin:
                connection: admin
                mappings:
                    WTWAPIDataMiningBundle: ~
                    WTWAPIFacebookBundle: ~
                    WTWCodeGenerationAnalysisBundle: ~
                    WTWDashboardBundle: ~
                    WTWLegacyProviderBundle: ~
                    WTWUserBundle: ~
            test_mysql:
                connection: test_mysql
                mappings:
                    WTWAPIDataMiningBundle: ~
                    WTWDashboardBundle: ~
        auto_generate_proxy_classes: %kernel.debug%

fos_rest:
    allowed_methods_listener: true

    param_fetcher_listener:   true

    routing_loader:
        default_format:       json

    view:
        formats:
            json: true
        mime_types:
            json: ['application/json', 'application/x-json', 'application/vnd.## FILL HOSTNAME ##+json']
        force_redirects:
            html: true
        view_response_listener: force

    format_listener:
        default_priorities:
            - json
            - html
            - '*/*'
        fallback_format:      json
        prefer_extension:     true

propel:
    path:       "%kernel.root_dir%/../vendor/propel"
    phing_path: "%kernel.root_dir%/../vendor/phing"

sensio_framework_extra:
    view:    { annotations: false }
    router:  { annotations: true }

sp_bower:
    install_on_warmup:  false
    keep_bowerrc:       true
    bin:                %bower_binary%
    assetic:
        enabled: true
    bundles:
        WTWDashboardBundle:
            config_dir: Resources/config/bower
            asset_dir:  ../../public/components
            json_file:  component.json
            endpoint:   %bower_endpoint%

# Swiftmailer Configuration
swiftmailer:
    spool:     { type: memory }
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%
